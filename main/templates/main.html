{% extends 'base.html' %}
{% load static %}
{% block content %}
{% include 'navbar.html' %}

<!-- Carousel Section -->
<div class="carousel-container h-screen md:h-auto relative">
  <div class="carousel flex h-full transition-transform duration-1000 ease-in-out">
    <div class="min-w-full h-full">
      <img src="{% static 'image/picture2.jpg' %}" alt="Carousel 1" class="w-full h-full object-cover">
    </div>
    <div class="min-w-full h-full">
      <img src="{% static 'image/picture1.jpg' %}" alt="Carousel 2" class="w-full h-full object-cover">
    </div>
    <div class="min-w-full h-full">
      <img src="{% static 'image/picture3.jpg' %}" alt="Carousel 3" class="w-full h-full object-cover">
    </div>
  </div>

  <!-- Previous and Next buttons -->
  <button class="absolute top-1/2 left-4 transform -translate-y-1/2 text-white p-2 rounded-full" id="prev">
    &#10094;
  </button>
  <button class="absolute top-1/2 right-4 transform -translate-y-1/2 text-white p-2 rounded-full" id="next">
    &#10095;
  </button>
</div>


<!-- Scrolling Logo Section -->
<div class="scrolling-logo-container relative overflow-hidden h-24">
  <div class="scrolling-logo flex animate-scroll">
    <img src="{% static 'image/JOSH_White.svg' %}" alt="Logo" class="h-24 mx-10">
    <img src="{% static 'image/JOSH_White.svg' %}" alt="Logo" class="h-24 mx-10">
    <img src="{% static 'image/JOSH_White.svg' %}" alt="Logo" class="h-24 mx-10">
    <img src="{% static 'image/JOSH_White.svg' %}" alt="Logo" class="h-24 mx-10">
    <img src="{% static 'image/JOSH_White.svg' %}" alt="Logo" class="h-24 mx-10">
    <img src="{% static 'image/JOSH_White.svg' %}" alt="Logo" class="h-24 mx-10">
    
    <!-- Duplicate set to create a seamless loop -->
    <img src="{% static 'image/JOSH_White.svg' %}" alt="Logo" class="h-24 mx-10">
    <img src="{% static 'image/JOSH_White.svg' %}" alt="Logo" class="h-24 mx-10">
    <img src="{% static 'image/JOSH_White.svg' %}" alt="Logo" class="h-24 mx-10">
    <img src="{% static 'image/JOSH_White.svg' %}" alt="Logo" class="h-24 mx-10">
    <img src="{% static 'image/JOSH_White.svg' %}" alt="Logo" class="h-24 mx-10">
    <img src="{% static 'image/JOSH_White.svg' %}" alt="Logo" class="h-24 mx-10">
  </div>
</div>

<!-- Image Section with "Show More" -->
<div class="flex justify-between items-center my-8 h-screen"> <!-- h-screen to make the section full height -->
  <!-- Left Image with Text -->
  <div class="relative w-full h-full"> <!-- w-full and h-full for full width and height -->
    <img src="{% static 'image/picture2.jpg' %}" alt="Left Image" class="w-full h-full object-cover">
    <div class="absolute inset-0 flex justify-center items-center text-white text-2xl"> <!-- text size increased -->
      <a href="#">Show More</a>
    </div>
  </div>
  
  <!-- Right Image with Text -->
  <div class="relative w-full h-full"> <!-- w-full and h-full for full width and height -->
    <img src="{% static 'image/picture3.jpg' %}" alt="Right Image" class="w-full h-full object-cover">
    <div class="absolute inset-0 flex justify-center items-center text-white text-2xl"> <!-- text size increased -->
      <a href="#">Show More</a>
    </div>
  </div>
</div>



<style>
  /* Remove gap between sections */
  .scrolling-logo-container {
    margin-top: 0;
  }

  /* Ensure the scrolling logos are always in a single line */
  .scrolling-logo {
    white-space: nowrap;
  }

  /* Animate scrolling smoothly without gaps */
  @keyframes scroll {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  .animate-scroll {
    animation: scroll 10s linear infinite; /* Adjust speed here */
  }

  /* Ensure the container is exactly twice the width of its contents for seamless loop */
  .scrolling-logo {
    display: inline-flex;
    width: 200%;
  }
</style>

{% if not josh_item_entries %}
  <div class="no-items-message text-center">
    <!-- Adjusted image size with smaller height -->
    <img src="{% static 'image/no-data.png' %}" alt="No items" class="mx-auto my-4 h-48 w-auto">
    
    <!-- Message -->
    <p>Sadly, currently there's no item in the JOSH shop, add an item first please.</p>

    <!-- Add New Item Button with space below -->
    <div class="mt-8 mb-8 text-center">
      <a href="{% url 'main:create_item_entry' %}" class="bg-black text-white px-6 py-2 rounded-lg">
          Add New Item
      </a>
    </div>
  </div>
{% else %}
  {% include 'product_list.html' %}
{% endif %}

<!-- Footer Section -->
{% include 'footer.html' %}

<!-- Last Login Section -->
<div class="bg-black py-4">
  <div class="text-center">
    <h5 class="text-sm text-white">Last login session: {{ last_login }}</h5>
  </div>
</div>

<style>
  /* Remove any gap between sections */
.scrolling-logo-container {
  margin-top: 0;
}

/* Flex container for scrolling content */
.scrolling-logo {
  white-space: nowrap;
  display: inline-flex;
  width: 200%;
}

/* Animation for scrolling */
@keyframes scroll {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}

.animate-scroll {
  animation: scroll 10s linear infinite; /* Adjust speed here */
}

/* Styling for the black background */
.bg-black {
  background-color: black;
}

.text-white {
  color: white;
}

</style>

<script>
  const carousel = document.querySelector('.carousel');
  const prevButton = document.getElementById('prev');
  const nextButton = document.getElementById('next');
  
  let index = 0;

  // Function to update carousel
  const updateCarousel = () => {
    const width = carousel.clientWidth;
    carousel.style.transform = `translateX(-${index * width}px)`;
  };

  // Next button click event
  nextButton.addEventListener('click', () => {
    const totalItems = carousel.children.length;
    if (index < totalItems - 1) {
      index++;
    } else {
      index = 0; // Loop back to first slide
    }
    updateCarousel();
  });

  // Previous button click event
  prevButton.addEventListener('click', () => {
    const totalItems = carousel.children.length;
    if (index > 0) {
      index--;
    } else {
      index = totalItems - 1; // Loop to last slide
    }
    updateCarousel();
  });

  // Auto-slide every 5 seconds
  setInterval(() => {
    const totalItems = carousel.children.length;
    if (index < totalItems - 1) {
      index++;
    } else {
      index = 0;
    }
    updateCarousel();
  }, 3000);
</script>

{% endblock content %}
